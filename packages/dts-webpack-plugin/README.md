# Typescript Declaration file Webpack plugin
Webpack 4 plugin to deals with Typescript declaration files .d.ts

## Install
```bash
npm i dts-webpack-plugin -D
```

## Brief
- steer `*.d.ts` (generated by tsc) to webpack output
- fix tsconfig paths alias ([declined feature by typescript's team](https://github.com/Microsoft/TypeScript/issues/15479))

plus, you can

- add extras static `*.d.ts` (**not** generated by tsc) to webpack output -- *(such as files manually written to bring types on top of raw .js files)*
- rename "types" entry point, an potentially add others `ambiant *.d.ts` to it -- *(such as global declarations, interfaces)*

# Examples
## > Simplest
`webpack.config.js`:
```js
const DTSPlugin = require('dts-webpack-plugin')

module.exports = {
    mode: 'development',
    entry: './src/index.ts',
    module: {
       rules: [
            {
              test: /\.ts$/,
              loaders: 'ts-loader',
              exclude: /node_modules/
            }
        ]
    },
    resolve: {
        extensions: [".ts"]
    },
    plugins: [
        new DTSPlugin() // default usage
    ]
}
```
output:
```
\dist\
    lib\a.d.ts
    index.d.ts
    main.js
```
source: [test1](tests/test1)

## > Advanced
`webpack.config.js`:
```js
const DTSPlugin = require('dts-webpack-plugin')
const path = require('path')

module.exports = {
    mode: 'development',
    entry: './src/index.ts',
    module: {
       rules: [
            {
              test: /\.ts$/,
              loaders: 'ts-loader',
              exclude: /node_modules/
            }
        ]
    },
    resolve: {
        extensions: [".ts", ".js"],
        alias: {
            /* just here to show that alias are indeed supported by ('dts-webpack-plugin') */
            "@stuff": path.resolve("src/stuff/")
        }
    },
    plugins: [
        new DTSPlugin({
            /* Typescript config file (default: 'tsconfig.json') */
            configFile: "./tsconfig.json",

            /* Webpack generated entry point (default: 'index.d.ts') */
            entry: "index.d.ts",
            /* Should be the same as package.json "types" (default: 'index.d.ts') */
            output: "types.d.ts",

            /* Declaration file to add at the top of output declaration file (default: []) */
            headers: [{
                    // file path
                    path: "./src/amb.d.ts",
                    // optional string replacement
                    replacement: [{ match: /\/\*export\*\//, value: 'export'}]
            }],

            /* Extras declarations files to copy in webpack output folder (default: [])
             * recurisivly copy *.d.ts files */
            extraIncludes: [{

                    //
                    // copy:
                    //   source = `${base}/${relativePath}/**/*.ts
                    //   destination = `${webpackOutput}/${relativePath}/**/*.ts
                    //
                    base: "src/",
                    relativePath: "stuff"
            }]
        })
    ]
}
```
output:
```
\dist\
    lib\a.d.ts
    stuff\baz.d.ts -- was manually written (aka not generated from tsc)
    types.d.ts -- same as previous 'index.d.ts', plus 'amb.d.ts' inserted on top
    main.js
```
source: [test2](tests/test2)
